<!DOCTYPE html>
<html lang="sv">
    <head>
        <meta charset="UTF-8" />
        <title>L채gg till produkt</title>
        <link rel="stylesheet" href="style/add_product.css">
    </head>
    <body>

        <form id="productForm">
            <h2>L채gg till produkt</h2>

            <label for="name">Namn:</label>
            <input type="text" id="name" required />

            <label for="price">Pris:</label>
            <input type="number" id="price" required />

            <label for="info">Info:</label>
            <input type="text" id="info" />

            <label for="image">Bild-URL:</label>
            <input type="text" id="image" required />

            <button type="submit">L채gg till</button>
        </form>

        <script>
            document
                .getElementById("productForm")
                .addEventListener("submit", async (e) => {
                    e.preventDefault();

                    const product = {
                        name: document.getElementById("name").value,
                        price: document.getElementById("price").value,
                        info: document.getElementById("info").value,
                        image: document.getElementById("image").value,
                    };

                    const res = await fetch("/api/products", {
                        method: "POST",
                        headers: { "Content-Type": "application/json" },
                        body: JSON.stringify(product),
                    });

                    if (res.ok) {
                        alert("Produkt tillagd!");
                        e.target.reset();
                    } else {
                        alert("Fel vid till채gg");
                    }
                });
        </script>
    </body>
</html>
